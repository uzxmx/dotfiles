#!/usr/bin/env bash

set -eo pipefail

dotfiles_dir="$(realpath "$(dirname "$BASH_SOURCE")/..")"

usage() {
  cat <<-EOF
This utility shows helps by searching filenames and file contents from default
locations, so you can quickly find a doc or run an executable script.
EOF
  exit 1
}

case "$1" in
  "")
    dirs=()
    if [ -d ~/.resources/docs/src ]; then
      dirs+=(~/.resources/docs/src)
    fi
    if [ -d ~/.resources/snippets/src ]; then
      dirs+=(~/.resources/snippets/src)
    fi
    if [ -d ~/.pwn ]; then
      dirs+=(~/.pwn)
    fi
    dirs+=("$dotfiles_dir")
    s --filename "${dirs[@]}"
    ;;
  *)
    usage
    ;;
esac
